(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{104:function(t,e,a){"use strict";a.r(e);var s={props:{page:{type:Object}},data:function(){return{selected:null}},computed:{canChangeOwner:function(){return["admin","author"].indexOf(this.$root.authUser.role)>-1&&this.$root.authUser.id!=this.page.author.id&&null===this.page.deleted_at}},methods:{openPageInEditor:function(t){this.$router.push({path:"/app/pages/"+t.id})},openPageInNewWindow:function(t){window.open(t.url,"_blank")},changePageStatus:function(t,e){util.ajax("put","/api/pages/"+t.id+"/status",{status:e},(function(a){t.status=e,util.toast({icon:"success",titleText:"Status Updated",text:" Page in "+e+" mode now."})}))},changeOwner:function(){var t=this;util.ajax("put","/api/pages/"+this.page.id+"/owner",{user_id:this.$root.authUser.id},(function(e){t.page.author=e.author,util.toast({icon:"success",titleText:"Owner Updated",text:"Page author is "+e.author.name+" now."})}))}}},r=a(0),i={data:function(){return{paginatedPages:{},tab:"all",searchPhrase:"",searchStatus:"",isLoading:!0}},created:function(){this.fetchFromServer()},components:{Page:Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-full bg-white shadow border-t border-blue-300 rounded my-4"},[a("div",{staticClass:"w-full relative"},[a("t-toggle",{staticClass:"absolute top-0 mt-4 right-0 mr-8",attrs:{id:"change-status-page-"+t.page.id,"true-value":"Live","false-value":"Draft","box-class":"w-20 shadow-inner bg-gray-100 border rounded-l rounded-r cursor-pointer","true-class":"h-6 px-3 bg-blue-400 text-blue-100 rounded shadow-sm","false-class":"h-6 px-3 bg-gray-400 text-gray-100 rounded shadow-sm","show-value":!0},on:{input:function(e){return t.changePageStatus(t.page,t.page.status)}},model:{value:t.page.status,callback:function(e){t.$set(t.page,"status",e)},expression:"page.status"}}),t._v(" "),a("h3",{staticClass:"px-6 pt-4 text-blue-400 text-sm"},[t._v("\n            "+t._s(t.page.category?t.page.category.name:"")+"\n        ")]),t._v(" "),a("h3",{staticClass:"px-6 pt-2 text-blue-800 font-semibold cursor-pointer",attrs:{id:"show-page-"+t.page.id},on:{click:function(e){return t.openPageInEditor(t.page)}}},[t._v("\n            "+t._s(t.page.title)+"\n        ")]),t._v(" "),a("div",{staticClass:"px-6 py-4 text-sm text-gray-700"},[t._v(t._s(t.page.summary))])],1),t._v(" "),a("div",{staticClass:"px-6 py-2 bg-gray-100 text-xs flex justify-between items-center"},[a("div",{staticClass:"mr-4 text-gray-700 flex items-center"},[a("img",{staticClass:"h-6 w-6 rounded-full mr-4",attrs:{src:t.page.author.avatar}}),t._v("\n            "+t._s(t.page.author.name)+" updated "+t._s(t.page.updated_ago)+".\n            "),t.canChangeOwner?a("span",{staticClass:"ml-4 hover:underline text-blue-400 cursor-pointer",on:{click:t.changeOwner}},[t._v("\n                Make me Author\n            ")]):t._e()]),t._v(" "),a("div",{staticClass:"text-right text-normal text-gray-500 hover:text-blue-700 cursor-pointer",attrs:{id:"view-page-"+t.page.id},on:{click:function(e){return t.openPageInNewWindow(t.page)}}},[t._v("\n            # "+t._s(t.page.id)+"\n        ")])])])}),[],!1,null,null,null).exports,Paginator:a(6).a},methods:{fetchFromServer:function(t){var e=this;void 0===t&&(t="/api/pages");var a=new URL(t,location.href);"draft"===this.tab&&a.searchParams.set("type","draft"),a.searchParams.set("query",this.searchPhrase),this.isLoading=!0,util.ajax("get",a,{},(function(t){e.paginatedPages=t,e.searchStatus="",e.isLoading=!1}))},doDelayedSearch:function(t){var e=this,a=(t=t||window.event).which?t.which:t.keyCode;13!==a&&17!==a&&18!==a&&20!==a&&27!==a&&37!==a&&38!==a&&39!==a&&40!==a&&(this.searchStatus="Searching...",this.timer&&(clearTimeout(this.timer),this.timer=null),this.doInstantLocalSearch(),this.timer=setTimeout((function(){return e.fetchFromServer()}),500))},doInstantLocalSearch:function(){for(var t=this.searchPhrase.toLowerCase(),e=0;e<this.paginatedPages.data.length;e++){var a=this.paginatedPages.data[e];-1===a.title.toLowerCase().indexOf(t)&&-1===a.summary.toLowerCase().indexOf(t)&&-1===a.author.name.toLowerCase().indexOf(t)&&this.paginatedPages.data.splice(e,1)}},filterByTab:function(t){this.tab=t,this.fetchFromServer()}}},n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"max-w-4xl mx-auto mb-12"},[a("div",{staticClass:"px-6 my-6 w-full flex justify-between items-center"},[a("h2",{staticClass:"text-indigo-600 text-2xl flex items-center"},[a("svg",{staticClass:"w-8 h-8 mr-3",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}},[a("path",{attrs:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}}),t._v(" "),a("polyline",{attrs:{points:"13 2 13 9 20 9"}})]),t._v("\n            Pages\n        ")]),t._v(" "),a("a",{staticClass:"bg-blue-600 h-10 text-white text-sm px-4 py-2 rounded shadow",attrs:{href:"/app/pages/create"}},[t._v("Create")])]),t._v(" "),a("div",{staticClass:"px-6 relative"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchPhrase,expression:"searchPhrase"}],staticClass:"w-full rounded-lg shadow px-4 py-3 text-sm focus:outline-none",attrs:{type:"text",name:"search",placeholder:"Search by page title, category or author..."},domProps:{value:t.searchPhrase},on:{keyup:t.doDelayedSearch,input:function(e){e.target.composing||(t.searchPhrase=e.target.value)}}}),t._v(" "),a("span",{staticClass:"absolute inset-y-0 right-0 pr-12 flex items-center text-gray-700"},[t._v("\n            "+t._s(t.searchStatus)+"\n        ")])]),t._v(" "),a("div",{staticClass:"px-6 w-full flex justify-start items-center my-8 border-b"},[a("div",{staticClass:"px-4 text-sm uppercase cursor-pointer",class:"all"===t.tab?"text-gray-700 py-2 border-b-4 border-blue-500":"text-gray-500 py-2",attrs:{id:"all-tab"},on:{click:function(e){return t.filterByTab("all")}}},[t._v("\n            All\n        ")]),t._v(" "),a("div",{staticClass:"px-4 text-sm uppercase cursor-pointer",class:"draft"===t.tab?"text-gray-700 py-2 border-b-4 border-blue-500":"text-gray-500 py-2",attrs:{id:"draft-tab"},on:{click:function(e){return t.filterByTab("draft")}}},[t._v("\n            Draft\n        ")])]),t._v(" "),a("div",{staticClass:"px-6"},[t._l(Array(3).keys(),(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"w-full bg-white mt-6 shadow border-t border-blue-400"},[t._m(0,!0),t._v(" "),t._m(1,!0),t._v(" "),t._m(2,!0),t._v(" "),t._m(3,!0),t._v(" "),a("div",{staticClass:"mt-3 bg-gray-100 h-8"})])})),t._v(" "),a("Paginator",{attrs:{"page-data":t.paginatedPages,"container-class":"w-full","item-class":"w-full","nav-class":"w-full p-4 flex justify-between items-center bg-gray-100"},on:{next:t.fetchFromServer,previous:t.fetchFromServer},scopedSlots:t._u([{key:"default",fn:function(t){return[a("Page",{attrs:{page:t.item}})]}}])}),t._v(" "),a("span",{staticClass:"text-sm text-gray-700"},[t._v(t._s(t.searchStatus))])],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"px-6 flex justify-between"},[e("span",{staticClass:"bg-blue-100 text-blue-100 mt-4"},[this._v("Category Name")]),this._v(" "),e("span",{staticClass:"bg-gray-200 text-gray-200 mt-3"},[this._v("Draft View")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"px-6 mt-3"},[e("span",{staticClass:"bg-blue-200 text-blue-200"},[this._v("\n                    Lorem ipsum dolor sit amet consectetur\n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"px-6 mt-3"},[e("span",{staticClass:"bg-gray-200 text-gray-200"},[this._v("\n                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugit excepturi\n                    assumenda dolore asperiores\n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"px-6 mt-1"},[e("span",{staticClass:"bg-gray-200 text-gray-200"},[this._v("\n                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ea, deserunt!\n                ")])])}],!1,null,null,null);e.default=n.exports}}]);