(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1:function(t,e,a){var s=a(15);"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(25)(s,i);s.locals&&(t.exports=s.locals)},14:function(t,e,a){"use strict";var s=a(1);a.n(s).a},15:function(t,e,a){(t.exports=a(24)(!1)).push([t.i,"\n.image-tool__caption {\n    min-height: 45px\n}\n.primary {\n    fill: #A5B3BB\n}\n.google-header {\n    font-family: arial,sans-serif;\n    font-size: 20px;\n    line-height: 1.3;\n    cursor: pointer;\n    color: #1a0dab\n}\n.google-url {\n    font-family: arial,sans-serif;\n    font-size: 16px;\n    line-height: 1.5;\n    padding-top: 1px;\n    color: #006621\n}\n.google-desc {\n    line-height: 1.57;\n    word-wrap: break-word;\n    color: #545454;\n    font-family: arial,sans-serif;\n    font-size: 14px;\n}\n\n",""])},29:function(t,e,a){"use strict";a.r(e);var s=a(4),i=a.n(s),r=a(5),o=a.n(r),n=a(6),l=a.n(n),c=a(7),d=a.n(c),u=a(8),p=a.n(u),v=a(9),g=a.n(v),m=a(10),h=a.n(m),x=a(11),f=a.n(x),y=a(12),b=a.n(y),w={data:function(){return{editor:null,id:0,title:null,intro:null,body:{},metakey:null,metadesc:null,category_id:1,status:"Draft",categories:[],tab:"content",isSaving:!1,errors:{title:[],summary:[],metadesc:[],metakey:[]}}},created:function(){this.fetchContentAndLoadEditor(),this.fetchCategoryListFromServer()},mounted:function(){this.focusInput()},methods:{isValid:function(){return this.title?this.title.length>=100?(util.notifyError("Page title too long!","Keep page title within maximum 100 characters."),!1):this.intro?!(this.intro.length>=1048)||(util.notifyError("Intro too long","Keep page intro within about 1000 characters"),!1):(util.notifyError("Provide an Introduction","Write a few lines of intro for this page before saving."),!1):(util.notifyError("Page has no title","Provide a title to save this page"),!1)},getSaveUrl:function(){return this.id>0?"/api/pages/"+this.id:"/api/pages"},getSaveMethod:function(){return this.id>0?"put":"post"},initiateSave:function(){var t=this;this.isValid()&&(this.errors={},this.isSaving=!0,this.editor.save().then((function(e){util.ajax(t.getSaveMethod(),t.getSaveUrl(),{id:t.id,title:t.title,summary:t.intro,body_json:JSON.stringify(e),metakey:t.metakey,metadesc:t.metadesc,category_id:t.category_id,status:t.status},t.postSaveProcessing,t.handle4xxError,t.handle5xxError)})).catch((function(t){console.log("Saving failed: ",t)})))},postSaveProcessing:function(t){if(this.isJustCreated()){var e=parseInt(t.id);this.id=e,this.$router.replace({path:"/app/pages/"+e})}this.isSaving=!1,util.toast({icon:"success",titleText:"Page Saved Successfully"})},handle4xxError:function(t,e){this.isSaving=!1,util.notifyError("Ouch! Couldn't save that...",e.message),422===t&&(this.errors=e.errors)},handle5xxError:function(t,e){console.log(e)},isJustCreated:function(){return 0===this.id},fetchContentAndLoadEditor:function(){if(void 0!==this.$route.params.id&&parseInt(this.$route.params.id)>0){var t=this;util.ajax("get","/api/pages/"+this.$route.params.id,{},(function(e){t.id=e.id,t.title=e.title,t.intro=e.summary,t.metakey=e.metakey,t.metadesc=e.metadesc,t.category_id=e.category_id,t.status=e.status,t.body=JSON.parse(e.content.body_json),t.editor=t.loadEditorTool()}))}else this.editor=this.loadEditorTool()},fetchCategoryListFromServer:function(){var t=this;util.ajax("get","/api/lov/categories",{},(function(e){t.categories=e}))},deletePage:function(){var t=this;util.confirm("Delete this page?","This action can not be reverted",(function(){util.ajax("delete","/api/pages/"+t.id,{},(function(e){util.notifySuccess("Deleted","The page has been successfully deleted"),t.$router.push("/app/pages")}))}))},loadEditorTool:function(){return new i.a({holder:"tensor-editor",data:this.body,tools:{header:{class:o.a,config:{placeholder:"Enter a sub-heading..."}},marker:g.a,list:{class:l.a,inlineToolbar:!0},code:d.a,inlineCode:p.a,table:{class:h.a,config:{rows:1,cols:2}},image:{class:f.a,config:{endpoints:{byFile:"/api/media",byUrl:"/api/media/fetchUrl"},additionalRequestHeaders:{"X-CSRF-TOKEN":document.head.querySelector('meta[name="csrf-token"]').content}}},embed:{class:b.a,inlineToolbar:!0,config:{services:{youtube:!0,vimeo:!0,codepen:!0}}}}})},focusInput:function(){this.$refs.title.focus()}},computed:{url:function(){return"https://yoursite.com/"+this.id+"-"+(this.title?this.title.replace(/\W+/g,"-").toLowerCase():"")}}},_=(a(14),a(0)),C=Object(_.a)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-full",on:{keydown:function(e){return(e.type.indexOf("key")||83===e.keyCode)&&e.ctrlKey?e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),e.stopPropagation(),t.initiateSave(e)):null}}},[a("div",{staticClass:"w-full px-6 border-b bg-white"},[a("div",{staticClass:"max-w-4xl mx-auto flex justify-between items-center"},[a("div",{staticClass:"flex justify-start items-center"},[a("div",{staticClass:"pr-6 py-4 text-xs uppercase text-gray-800 cursor-pointer",class:"content"===t.tab?"px-6 text-blue-600 font-bold border-b-4 border-blue-500":"",on:{click:function(e){t.tab="content"}}},[a("svg",{staticClass:"h-6 w-6 sm:hidden",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[a("path",{staticClass:"primary",attrs:{d:"M6 2h6v6c0 1.1.9 2 2 2h6v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2zm2 11a1 1 0 0 0 0 2h8a1 1 0 0 0 0-2H8zm0 4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2H8z"}}),a("polygon",{staticClass:"secondary",attrs:{points:"14 2 20 8 14 8"}})]),t._v(" "),a("span",{staticClass:"hidden sm:inline-block tracking-wider"},[t._v("Content")])]),t._v(" "),a("div",{staticClass:"px-6 py-4 text-xs uppercase text-gray-800 cursor-pointer",class:"meta"===t.tab?"text-blue-600 font-bold border-b-4 border-blue-500":"",on:{click:function(e){t.tab="meta"}}},[a("svg",{staticClass:"h-6 w-6 sm:hidden",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[a("path",{staticClass:"primary",attrs:{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"}}),a("path",{staticClass:"secondary",attrs:{d:"M11 12a1 1 0 0 1 0-2h2a1 1 0 0 1 .96 1.27L12.33 17H13a1 1 0 0 1 0 2h-2a1 1 0 0 1-.96-1.27L11.67 12H11zm2-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}})]),t._v(" "),a("span",{staticClass:"hidden sm:inline-block tracking-wider"},[t._v("Meta")])]),t._v(" "),a("div",{staticClass:"px-6 py-4 text-xs uppercase text-gray-800 cursor-pointer",class:"setting"===t.tab?"text-blue-600 font-bold border-b-4 border-blue-500":"",on:{click:function(e){t.tab="setting"}}},[a("svg",{staticClass:"h-6 w-6 sm:hidden",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[a("path",{staticClass:"secondary",attrs:{"fill-rule":"evenodd",d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"}})]),t._v(" "),a("span",{staticClass:"hidden sm:inline-block tracking-wider"},[t._v("Setting")])])]),t._v(" "),a("t-button",{attrs:{loadingWheel:t.isSaving},nativeOn:{click:function(e){return t.initiateSave(e)}}},[t._v("\n                Save\n            ")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"content"===t.tab,expression:"tab==='content'"}],staticClass:"w-full",attrs:{id:"page-contents"}},[a("div",{staticClass:"pt-10 w-full p-6 pb-24"},[a("div",{staticClass:"mx-auto max-w-4xl"},[a("label",{directives:[{name:"show",rawName:"v-show",value:!t.title,expression:"!title"}],staticClass:"px-6 uppercase text-xs tracking-wider text-gray-700 block pb-2"},[t._v("\n                    Title\n                ")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"title",staticClass:"px-6 bg-transparent border-b-2 border-gray-400 h-24 outline-none text-blue-800 text-3xl tracking-wide w-full",attrs:{name:"title",placeholder:"Title of your story"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),a("t-error-message",{attrs:{errors:t.errors,field:"title"}})],1),t._v(" "),a("div",{staticClass:"mt-12 mx-auto  max-w-4xl"},[a("label",{directives:[{name:"show",rawName:"v-show",value:!t.intro,expression:"!intro"}],staticClass:"px-6 uppercase text-xs tracking-wider text-gray-700 block pb-2"},[t._v("\n                    Intro\n                ")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intro,expression:"intro"}],staticClass:"px-6 bg-transparent h-24 outline-none text-gray-700 text-lg tracking-wide w-full",attrs:{name:"intro",placeholder:"Provide a 3/4 lines of introduction to your story..."},domProps:{value:t.intro},on:{input:function(e){e.target.composing||(t.intro=e.target.value)}}}),t._v(" "),a("t-error-message",{attrs:{errors:t.errors,field:"summary"}})],1)]),t._v(" "),t._m(0)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"meta"===t.tab,expression:"tab==='meta'"}],staticClass:"w-full max-w-4xl mx-auto px-4 xl:px-0 pb-20",attrs:{id:"page-meta"}},[a("div",{staticClass:"text-sm text-gray-600 pt-10 pb-3 uppercase"},[t._v("Meta Information")]),t._v(" "),a("div",{staticClass:"bg-white rounded md:flex w-full py-6 px-4 border-t-2 border-blue-400 shadow"},[a("div",{staticClass:"w-full md:w-1/2 px-4"},[a("div",{staticClass:"uppercase1 text-gray-800 text-sm"},[t._v("Meta Description")]),t._v(" "),a("div",{staticClass:"h-20 flex items-center text-xs text-gray-600 overflow-y-scroll"},[t._v("\n                    Good meta descriptions are short blurbs that describe accurately the content of the page.\n                    This gives Google and other search engines a summary of what the page is about.\n                ")]),t._v(" "),a("t-error-message",{attrs:{errors:t.errors,field:"metadesc"}}),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.metadesc,expression:"metadesc"}],staticClass:"mt-2 w-full bg-gray-100 shadow-inner rounded-lg text-xs text-gray-800 p-4 border focus:outline-none",class:t.metadesc?"":"border-red-400",domProps:{value:t.metadesc},on:{input:function(e){e.target.composing||(t.metadesc=e.target.value)}}}),t._v(" "),a("span",{staticClass:"mt-3 p-1 text-xs text-blue-700 cursor-pointer hover:text-blue-900",on:{click:function(e){t.metadesc=t.intro}}},[t._v("Copy from Intro text")])],1),t._v(" "),a("div",{staticClass:"w-full mt-4 md:mt-0 md:w-1/2 px-4"},[a("div",{staticClass:"uppercase1 text-gray-800 text-sm"},[t._v("Meta Keywords")]),t._v(" "),a("div",{staticClass:"h-20 flex items-center text-xs text-gray-600 overflow-y-scroll"},[t._v("\n                    A series of keywords you deem relevant to the page in question. These are used to automatically generate tags for the page.\n                    Note that Google doesn’t use meta keywords in its ranking algorithm.\n                ")]),t._v(" "),a("t-error-message",{attrs:{errors:t.errors,field:"metakey"}}),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.metakey,expression:"metakey"}],staticClass:"mt-2 w-full bg-gray-100 shadow-inner rounded-lg text-xs text-gray-800 p-4 border focus:outline-none",domProps:{value:t.metakey},on:{input:function(e){e.target.composing||(t.metakey=e.target.value)}}})],1)]),t._v(" "),a("div",{staticClass:"text-sm text-gray-600 pt-10 pb-3 uppercase"},[t._v("Organize")]),t._v(" "),a("div",{staticClass:"bg-white rounded w-full py-6 px-4 border-t-2 border-blue-400 shadow"},[a("div",{staticClass:"w-full px-4"},[a("div",{staticClass:"uppercase1 text-gray-800 text-sm"},[t._v("Category")]),t._v(" "),a("div",{staticClass:"py-3 flex items-center text-xs text-gray-600 overflow-y-scroll"},[t._v("\n                    You may organize your pages under various categories.\n                    Category names can be used to create menu items that can link all the pages under the same category.\n                ")]),t._v(" "),a("div",{staticClass:"inline-block relative w-64"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.category_id,expression:"category_id"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.category_id=e.target.multiple?a:a[0]}}},t._l(t.categories,(function(e){return a("option",{key:e.key,domProps:{value:e.key}},[t._v("\n                                "+t._s(e.value)+"\n                        ")])})),0),t._v(" "),a("div",{staticClass:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},[a("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[a("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])])])])]),t._v(" "),a("div",{staticClass:"text-sm text-gray-600 pt-10 pb-3 uppercase"},[t._v("Search Engine Preview")]),t._v(" "),a("div",{staticClass:"bg-white rounded w-full py-6 px-4 border-t-2 border-blue-400 shadow"},[a("div",{staticClass:"w-full px-4"},[a("div",{staticClass:"uppercase1 text-gray-800 text-sm"},[t._v("Google Search Preview")]),t._v(" "),a("div",{staticClass:"py-3 flex items-center text-xs text-gray-600 overflow-y-scroll"},[t._v("\n                    This is how this page will appear in Google search when using the page meta description.\n                    Search engines may use meta description as snippets for your pages or\n                    a more relevant section of your page's visible text, if that fits better with a user's query.\n                ")]),t._v(" "),a("div",{staticClass:"mt-2 w-full bg-gray-100 rounded-lg p-4 border"},[a("div",{staticClass:"google-header"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"google-url"},[t._v(t._s(t.url))]),t._v(" "),a("div",{staticClass:"google-desc"},[t._v(t._s(t.metadesc))])])])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"setting"===t.tab,expression:"tab==='setting'"}],staticClass:"w-full max-w-4xl mx-auto px-4 xl:px-0 pb-20",attrs:{id:"page-setting"}},[a("div",{staticClass:"text-sm text-gray-600 pt-10 pb-3 uppercase"},[t._v("\n            Publication\n        ")]),t._v(" "),a("div",{staticClass:"bg-white rounded w-full py-6 px-4 border-t-2 border-blue-400 shadow"},[a("t-toggle",{staticClass:"mb-4",attrs:{"true-value":"Live","false-value":"Draft"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("div",{staticClass:"ml-2 text-gray-700 text-sm"},[t._v("\n                    "+t._s(t.status)+"\n                ")])]),t._v(" "),a("div",{staticClass:"w-full mb-2 text-xs text-gray-700"},[t._v("\n                Only Live page will be accessible to site visitors.\n            ")])],1),t._v(" "),a("div",{staticClass:"pt-10 pb-3 text-right"},[a("span",{staticClass:"text-sm text-grey-600 hover:text-red-600 cursor-pointer",on:{click:t.deletePage}},[t._v("\n                Delete this page\n            ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-full p-2 bg-gray-100 pb-20"},[e("div",{staticClass:"max-w-4xl mx-auto bg-white -mt-16 shadow-xl px-6 pt-6 border-t-2 border-blue-400"},[e("div",{staticClass:"mx-auto text-gray-700 pb-4 bg-white -mr-2 wt-typography",attrs:{id:"tensor-editor"}})])])}],!1,null,null,null);e.default=C.exports}}]);