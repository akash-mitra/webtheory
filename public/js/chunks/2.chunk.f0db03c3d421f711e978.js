(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{39:function(t,e,s){"use strict";s.r(e);var a={data:function(){return{tab:"template",isSaving:!1,id:0,type:null,name:null,description:null,url:"https://source.unsplash.com/500x310/?blog,page",sourceCode:null,active:!1,parameters:[]}},created:function(){this.fetchContentAndLoadEditor()},components:{editor:s(20)},methods:{editorInit:function(){s(23),s(27)},addParam:function(){this.parameters.push({name:"",type:"text",options:"",value:""})},isValid:function(){return this.name?this.name.length>=100?(util.notifyError("Template name too long!","Keep name within maximum 100 characters."),!1):this.description?this.description.length>=1048?(util.notifyError("Description too long","Keep description within about 1000 characters"),!1):!!this.type||(util.notifyError("Template must have a type",'Select any one type for this template, e.g. "Home" or "Single" etc.'),!1):(util.notifyError("Provide a description","Write a few lines of description for this template before saving."),!1):(util.notifyError("Template has no name","Provide a name for this template"),!1)},getSaveUrl:function(){return this.id>0?"/api/templates/"+this.id:"/api/templates"},getSaveMethod:function(){return this.id>0?"put":"post"},initiateSave:function(){this.isValid()&&(this.isSaving=!0,util.ajax(this.getSaveMethod(),this.getSaveUrl(),{id:this.id,name:this.name,description:this.description,code:this.sourceCode,type:this.type,media_url:this.url,active:this.active,parameters:JSON.stringify(this.parameters)},this.postSaveProcessing))},postSaveProcessing:function(t){if(this.isJustCreated()){var e=parseInt(t.id);this.id=e,this.$router.replace({path:"/app/templates/"+e})}this.isSaving=!1,util.toast({icon:"success",titleText:"Template Saved Successfully"})},isJustCreated:function(){return 0===this.id},fetchContentAndLoadEditor:function(){if(void 0!==this.$route.params.id&&parseInt(this.$route.params.id)>0){this.sourceCode="Retrieving information from the server....";var t=this;util.ajax("get","/api/templates/"+this.$route.params.id,{},(function(e){t.id=e.id,t.name=e.name,t.description=e.description,t.type=e.type,t.url=e.media_url,t.sourceCode=e.code,t.active=e.active,t.parameters=JSON.parse(e.parameters)}))}},deletePage:function(){var t=this;util.confirm("Delete this template?","This action can not be reverted",(function(){util.ajax("delete","/api/templates/"+t.id,{},(function(e){util.notifySuccess("Deleted","The template has been successfully deleted"),t.$router.push("/app/templates")}))}))}}},r=s(0),i=Object(r.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"max-w-5xl mx-auto"},[s("div",{staticClass:"px-2 my-6 w-full flex justify-between items-center"},[s("h2",{staticClass:"text-gray-600 text-2xl flex items-center"},[t._v("Template Editor")]),t._v(" "),s("t-button",{attrs:{loadingWheel:t.isSaving},nativeOn:{click:function(e){return t.initiateSave(e)}}},[t._v("\n                Save\n        ")])],1),t._v(" "),s("div",{staticClass:"px-2 w-full flex justify-start items-center mt-8"},[s("div",{staticClass:"px-6 text-sm tracking-wide uppercase cursor-pointer",class:"template"===t.tab?"text-gray-700 py-2 1border-b-4 border-blue-500":"text-gray-500 py-2",on:{click:function(e){t.tab="template"}}},[t._v("Template")]),t._v(" "),s("div",{staticClass:"px-6 text-sm tracking-wide uppercase cursor-pointer",class:"source"===t.tab?"text-gray-700 py-2 1border-b-4 border-blue-500":"text-gray-500 py-2",on:{click:function(e){t.tab="source"}}},[t._v("Source")]),t._v(" "),s("div",{staticClass:"px-6 text-sm tracking-wide uppercase cursor-pointer",class:"parameters"===t.tab?"text-gray-700 py-2 1border-b-4 border-blue-500":"text-gray-500 py-2",on:{click:function(e){t.tab="parameters"}}},[t._v("Parameters")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"template"===t.tab,expression:"tab==='template'"}],staticClass:"w-full bg-white border-t border-blue-400 rounded mb-12"},[s("div",{staticClass:"w-full sm:flex mb-4 px-6 pt-8"},[s("label",{staticClass:"block w-full sm:w-1/4 text-sm py-1 px-3",attrs:{for:"templateName"}},[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"name",staticClass:"w-full sm:w-3/4 max-w-lg px-2 py-1 my-1 rounded appearance-none bg-gray-200 focus:bg-white border focus:outline-none",attrs:{type:"text",id:"templateName"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"w-full sm:flex mb-8 px-6 py-4"},[t._m(0),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"w-full sm:w-3/4 text-sm max-w-lg px-2 py-1 my-1 rounded appearance-none bg-gray-200 focus:bg-white border focus:outline-none",attrs:{id:"templateDescription"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"w-full sm:flex mb-8 px-6 py-6 border-t"},[t._m(1),t._v(" "),s("div",{staticClass:"w-full sm:w-3/4 flex flex-wrap"},[s("div",{staticClass:"w-40 m-3 p-4 border cursor-pointer rounded-lg shadow-md relative",class:"home"===t.type?"bg-green-100 border-green-400":"",on:{click:function(e){t.type="home"}}},["home"===t.type?s("div",{staticClass:"w-8 h-8 p-2 bg-green-500 text-white rounded-full border border-white",staticStyle:{position:"absolute",top:"-10px",right:"-10px"}},[s("svg",{staticClass:"fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469 469"}},[s("path",{attrs:{d:"M463 96l-22-22c-9-8-24-8-33 0L180 302 61 183c-9-9-24-9-33 0L7 205c-9 9-9 23 0 32l157 158a23 23 0 0032 0l266-266c9-9 9-24 1-33z"}})])]):t._e(),t._v(" "),s("h3",{staticClass:"text-sm uppercase"},[t._v("Home")]),t._v(" "),s("div",{staticClass:"text-xs text-gray-700"},[t._v("Template for the home page of your blog")])]),t._v(" "),s("div",{staticClass:"w-40 h-32 m-3 p-4 border cursor-pointer rounded-lg shadow-md relative",class:"single"===t.type?"bg-green-100 border-green-400":"",on:{click:function(e){t.type="single"}}},["single"===t.type?s("div",{staticClass:"w-8 h-8 p-2 bg-green-500 text-white rounded-full border border-white",staticStyle:{position:"absolute",top:"-10px",right:"-10px"}},[s("svg",{staticClass:"fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469 469"}},[s("path",{attrs:{d:"M463 96l-22-22c-9-8-24-8-33 0L180 302 61 183c-9-9-24-9-33 0L7 205c-9 9-9 23 0 32l157 158a23 23 0 0032 0l266-266c9-9 9-24 1-33z"}})])]):t._e(),t._v(" "),s("h3",{staticClass:"text-sm uppercase"},[t._v("Single")]),t._v(" "),s("div",{staticClass:"text-xs text-gray-700"},[t._v("Template for a single blog article page")])]),t._v(" "),s("div",{staticClass:"w-40 h-32 m-3 p-4 border cursor-pointer rounded-lg shadow-md relative",class:"category"===t.type?"bg-green-100 border-green-400":"",on:{click:function(e){t.type="category"}}},["category"===t.type?s("div",{staticClass:"w-8 h-8 p-2 bg-green-500 text-white rounded-full border border-white",staticStyle:{position:"absolute",top:"-10px",right:"-10px"}},[s("svg",{staticClass:"fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469 469"}},[s("path",{attrs:{d:"M463 96l-22-22c-9-8-24-8-33 0L180 302 61 183c-9-9-24-9-33 0L7 205c-9 9-9 23 0 32l157 158a23 23 0 0032 0l266-266c9-9 9-24 1-33z"}})])]):t._e(),t._v(" "),s("h3",{staticClass:"text-sm uppercase"},[t._v("Category")]),t._v(" "),s("div",{staticClass:"text-xs text-gray-700"},[t._v("Template for showing all the pages from a category")])]),t._v(" "),s("div",{staticClass:"w-40 h-32 m-3 p-4 border cursor-pointer rounded-lg shadow-md relative",class:"profile"===t.type?"bg-green-100 border-green-400":"",on:{click:function(e){t.type="profile"}}},["profile"===t.type?s("div",{staticClass:"w-8 h-8 p-2 bg-green-500 text-white rounded-full border border-white",staticStyle:{position:"absolute",top:"-10px",right:"-10px"}},[s("svg",{staticClass:"fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469 469"}},[s("path",{attrs:{d:"M463 96l-22-22c-9-8-24-8-33 0L180 302 61 183c-9-9-24-9-33 0L7 205c-9 9-9 23 0 32l157 158a23 23 0 0032 0l266-266c9-9 9-24 1-33z"}})])]):t._e(),t._v(" "),s("h3",{staticClass:"text-sm uppercase"},[t._v("Profile")]),t._v(" "),s("div",{staticClass:"text-xs text-gray-700"},[t._v("Template for showing a user profile page")])]),t._v(" "),s("div",{staticClass:"w-40 h-32 m-3 p-4 border cursor-pointer rounded-lg shadow-md relative",class:"forum"===t.type?"bg-green-100 border-green-400":"",on:{click:function(e){t.type="forum"}}},["forum"===t.type?s("div",{staticClass:"w-8 h-8 p-2 bg-green-500 text-white rounded-full border border-white",staticStyle:{position:"absolute",top:"-10px",right:"-10px"}},[s("svg",{staticClass:"fill-current",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 469 469"}},[s("path",{attrs:{d:"M463 96l-22-22c-9-8-24-8-33 0L180 302 61 183c-9-9-24-9-33 0L7 205c-9 9-9 23 0 32l157 158a23 23 0 0032 0l266-266c9-9 9-24 1-33z"}})])]):t._e(),t._v(" "),s("h3",{staticClass:"text-sm uppercase"},[t._v("Forum")]),t._v(" "),s("div",{staticClass:"text-xs text-gray-700"},[t._v("Template for showing a single forum post")])])])]),t._v(" "),s("div",{staticClass:"w-full sm:flex my-4 border-t px-6 py-6"},[t._m(2),t._v(" "),s("div",{staticClass:"w-full sm:w-3/4"},t._l(t.parameters,(function(e,a){return s("div",{staticClass:"w-full md:flex bg-gray-100 p-3 mb-2"},[s("div",{staticClass:"w-full md:w-1/3"},[s("span",{staticClass:"text-gray-400 text-xs p-2 md:text-right"},[t._v("Parameter")]),s("code",[t._v(t._s(e.name))])]),t._v(" "),s("div",{staticClass:"w-full md:w-2/3"},["text"===e.type?s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"param.value"}],staticClass:"w-full max-w-lg text-sm px-2 py-1 my-1 rounded bg-white border focus:outline-none",attrs:{type:"text"},domProps:{value:e.value},on:{input:function(s){s.target.composing||t.$set(e,"value",s.target.value)}}}):s("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"param.value"}],staticClass:"w-full max-w-lg text-sm px-2 py-1 my-1 rounded bg-white border focus:outline-none",on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"value",s.target.multiple?a:a[0])}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("Select")]),t._v(" "),t._l(e.options.split(",").map((function(t){return t.trim()})),(function(e){return s("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)])])})),0)]),t._v(" "),s("div",{staticClass:"w-full sm:flex mb-4 border-t px-6 py-6 bg-gray-100"},[t._m(3),t._v(" "),s("div",{staticClass:"w-full sm:w-3/4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"w-full max-w-lg text-sm max-w-lg px-2 py-1 my-1 rounded appearance-none bg-gray-200 focus:bg-white border focus:outline-none",attrs:{type:"text",id:"templateUrl"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"source"===t.tab,expression:"tab==='source'"}],staticClass:"w-full rounded mb-12"},[s("editor",{attrs:{lang:"html",theme:"twilight",width:"100%",height:"500"},on:{init:t.editorInit},model:{value:t.sourceCode,callback:function(e){t.sourceCode=e},expression:"sourceCode"}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"parameters"===t.tab,expression:"tab==='parameters'"}],staticClass:"w-full bg-white px-6 py-6 border-t border-blue-400 rounded overflow-scroll mb-12"},[s("div",{staticClass:"text-lg text-gray-800 pb-2"},[t._v("Create or Edit Template Parameters")]),t._v(" "),s("div",{staticClass:"text-sm text-gray-800 pb-4"},[t._v("\n            Template parameters can be used to avoid hard-coding certain values in the template and replace them with parameters.\n        ")]),t._v(" "),s("table",{staticClass:"table-auto w-full text-xs mb-2"},[t._m(4),t._v(" "),s("tbody",t._l(t.parameters,(function(e){return s("tr",[s("td",{staticClass:"pr-2 py-2 border-b"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"row.name"}],staticClass:"font-mono rounded w-full bg-gray-200 p-2",attrs:{type:"text",title:"Only lowercase letters",pattern:"^[a-z]+(?:_+[a-z]+)*$"},domProps:{value:e.name},on:{input:function(s){s.target.composing||t.$set(e,"name",s.target.value)}}})]),t._v(" "),s("td",{staticClass:"pr-2 py-2 border-b"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"row.type"}],staticClass:"text-gray-800 w-full",on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"type",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"text"}},[t._v("Text")]),t._v(" "),s("option",{attrs:{value:"list"}},[t._v("List")])])]),t._v(" "),s("td",{staticClass:"pr-2 py-2 border-b"},[s("input",{directives:[{name:"show",rawName:"v-show",value:"list"===e.type,expression:"row.type==='list'"},{name:"model",rawName:"v-model",value:e.options,expression:"row.options"}],staticClass:"font-mono rounded w-full bg-gray-200 p-2",attrs:{type:"text"},domProps:{value:e.options},on:{input:function(s){s.target.composing||t.$set(e,"options",s.target.value)}}})])])})),0)]),t._v(" "),s("p",{staticClass:"text-xs font-normal"},[t._v("No space is allowed in parameter name.")]),t._v(" "),s("div",{staticClass:"py-2 px-4 inline-block mt-4 border rounded cursor-pointer text-sm shado1w border-blue-400 text-blue-500",on:{click:t.addParam}},[t._v("Add Parameter")])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-full sm:w-1/4 text-sm py-1 px-3"},[e("label",{attrs:{for:"templateDescription"}},[this._v("Description")]),this._v(" "),e("p",{staticClass:"text-xs text-gray-600 py-2"},[this._v("Describe the motivation behind this template")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-full sm:w-1/4 text-sm py-1 px-3"},[e("p",[this._v("Type")]),this._v(" "),e("p",{staticClass:"text-xs text-gray-600 py-2"},[this._v("What type of web page is this template design for?")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-full sm:w-1/4 text-sm py-1 px-3"},[e("label",{attrs:{for:"templateUrl"}},[this._v("Parameters")]),this._v(" "),e("p",{staticClass:"text-xs text-gray-600 py-2"},[this._v("Provide the values for all the below paramters.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w-full sm:w-1/4 text-sm py-1 px-3"},[e("label",{attrs:{for:"templateUrl"}},[this._v("Template Image URL")]),this._v(" "),e("p",{staticClass:"text-xs text-gray-600 py-2"},[this._v("Provide an image URL to be used as template icon image")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticClass:"pr-2 py-2 border-b text-left"},[e("p",[this._v("Parameter")])]),this._v(" "),e("th",{staticClass:"pr-2 py-2 border-b text-left"},[this._v("Type")]),this._v(" "),e("th",{staticClass:"pr-2 py-2 border-b text-left"},[this._v("List Items")])])])}],!1,null,null,null);e.default=i.exports}}]);